---
import site from '@data/site'
import { SEO } from 'astro-seo'
import Fonts from './Fonts.astro'
import Favicon from './Favicon.astro'

const pageSeo = Astro.props.seo
const defaultSeo = {
  charset: 'UTF-8',
  titleDefault: site.name,
  openGraph: {
    basic: {
      title: site.name,
      type: 'website',
      image: Astro.url.pathname + site.image,
    },
  },
}
const mergedSeo = {
  ...defaultSeo,
  ...pageSeo,
}
---

<script type="text/javascript" is:inline>
  !(function () {
    var e = (window.rudderanalytics = window.rudderanalytics || [])
    ;(e.methods = [
      'load',
      'page',
      'track',
      'identify',
      'alias',
      'group',
      'ready',
      'reset',
      'getAnonymousId',
      'setAnonymousId',
      'getUserId',
      'getUserTraits',
      'getGroupId',
      'getGroupTraits',
      'startSession',
      'endSession',
    ]),
      (e.factory = function (t) {
        return function () {
          e.push([t].concat(Array.prototype.slice.call(arguments)))
        }
      })
    for (var t = 0; t < e.methods.length; t++) {
      var r = e.methods[t]
      e[r] = e.factory(r)
    }
    ;(e.loadJS = function (e, t) {
      var r = document.createElement('script')
      ;(r.type = 'text/javascript'),
        (r.async = !0),
        (r.src = 'https://cdn.rudderlabs.com/v1.1/rudder-analytics.min.js')
      var a = document.getElementsByTagName('script')[0]
      a.parentNode.insertBefore(r, a)
    }),
      e.loadJS(),
      e.load(
        '2U4b8RZqZrE28N0SMdRtGFNibgq',
        'https://antislipprcqfo.dataplane.rudderstack.com'
      ),
      e.page()
  })()
</script>

<meta
  content="width=device-width, initial-scale=1, viewport-fit=cover"
  name="viewport"
/>
<meta
  name="generator"
  content={Astro.generator}
/>

<SEO {...mergedSeo} />
<Fonts />
<Favicon />
