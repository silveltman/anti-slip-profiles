---
import site from '@data/site'
import { SEO } from 'astro-seo'
import Fonts from './Fonts.astro'
import Favicon from './Favicon.astro'

const pageSeo = Astro.props.seo
const defaultSeo = {
  charset: 'UTF-8',
  titleDefault: site.name,
  openGraph: {
    basic: {
      title: site.name,
      type: 'website',
      image: Astro.url.pathname + site.image,
    },
  },
}
const mergedSeo = {
  ...defaultSeo,
  ...pageSeo,
}
---

<script is:inline>
  window.dataLayer = window.dataLayer || []
  function gtag() {
    dataLayer.push(arguments)
  }
</script>
<script is:inline src="https://www.googletagmanager.com/gtag/js?id=GTM-NJKM2RT5"
></script>
<script is:inline>
  window.dataLayer = window.dataLayer || []
  function gtag() {
    dataLayer.push(arguments)
  }
  gtag('js', new Date())

  gtag('config', 'GTM-NJKM2RT5')
</script>

<script
  is:inline
  defer
  data-domain="antislipprofiles.com"
  src="https://plausible.io/js/script.js"
></script>

<meta
  content="width=device-width, initial-scale=1, viewport-fit=cover"
  name="viewport"
/>
<meta
  name="generator"
  content={Astro.generator}
/>

<SEO {...mergedSeo} />
<Fonts />
<Favicon />

<!-- LiveSession.io code -->
<script type="text/javascript" is:inline>
  window['__ls_namespace'] = '__ls'
  window['__ls_script_url'] = 'https://cdn.livesession.io/track.js'
  !(function (w, d, t, u, n) {
    if (n in w) {
      if (w.console && w.console.log) {
        w.console.log(
          'LiveSession namespace conflict. Please set window["__ls_namespace"].'
        )
      }
      return
    }
    if (w[n]) return
    var f = (w[n] = function () {
      f.push ? f.push.apply(f, arguments) : f.store.push(arguments)
    })
    if (!w[n]) w[n] = f
    f.store = []
    f.v = '1.1'

    var ls = d.createElement(t)
    ls.async = true
    ls.src = u
    var s = d.getElementsByTagName(t)[0]
    s.parentNode.insertBefore(ls, s)
  })(
    window,
    document,
    'script',
    window['__ls_script_url'],
    window['__ls_namespace']
  )

  __ls('init', 'cb493374.88454ef1', { keystrokes: false })
  __ls('newPageView')
</script>
<!-- END LiveSession.io code -->
